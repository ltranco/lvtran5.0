!function(t,e){t.fn.drawDoughnutChart=function(e,n){function a(t,e){var n=-1.57,a=4.7131,o=b+S(n)*t,i=y+T(n)*t,r=b+S(n)*e,s=y+T(n)*e,u=b+S(a)*t,m=y+T(a)*t,p=b+S(a)*e,l=y+T(a)*e,h=["M",o,i,"A",t,t,0,1,1,u,m,"Z","M",p,l,"A",e,e,0,1,0,r,s,"Z"];return h=h.join(" ")}function o(n){var a=t(this).data().order;if(x.showTip&&q.text(e[a].title).fadeIn(200),x.showLabel){x.shortInt?d(e[a].value):e[a].value}x.onPathEnter.apply(t(this),[n,e])}function i(n){if(x.showTip&&q.hide(),x.showLabel){x.shortInt?d(L):L}x.onPathLeave.apply(t(this),[n,e])}function r(t){x.showTip&&q.css({top:t.pageY+x.tipOffsetY,left:t.pageX-q.width()/2+x.tipOffsetX})}function s(n){var a=t(this).data().order;"undefined"!=typeof e[a].action&&e[a].action()}function u(t){var n=-C/2,o=1;if(x.animation&&x.animateRotate&&(o=t),m(t,L),R.attr("opacity",t),1===e.length&&4.7122<o*(e[0].value/L)*2*C+n)return void E[0].attr("d",a(F,I));for(var i=0,r=e.length;r>i;i++){var s=o*(e[i].value/L)*2*C,u=n+s,p=(u-n)%(2*C)>C?1:0,l=b+S(n)*F,h=y+T(n)*F,f=b+S(n)*I,w=y+T(n)*I,d=b+S(u)*F,c=y+T(u)*F,g=b+S(u)*I,v=y+T(u)*I,O=["M",l,h,"A",F,F,0,p,1,d,c,"L",g,v,"A",I,I,0,p,0,f,w,"Z"];E[i].attr("d",O.join(" ")),n+=s}}function m(t,e){X.css({opacity:t}).text((e*t).toFixed(1));var n="Python<br>Java/C<br>Obj-C/Swift<br>Ocaml<br>HTML/CSS/JS";X.html(n)}function p(t,e){var n=x.animation?w(M(t),null,0):1;e(n)}function l(t){var e=x.animation?1/w(x.animationSteps,Number.MAX_VALUE,1):1,n=x.animation?0:1;k(function(){n+=e,p(n,t),1>=n?k(arguments.callee):x.afterDrawed.call(c)})}function h(t){return Math.min.apply(null,t)}function f(t){return!isNaN(parseFloat(t))&&isFinite(t)}function w(t,e,n){return f(e)&&t>e?e:f(n)&&n>t?n:t}function d(t){t=t.toString();var e=t.length;return 5>e?t:8>e?'<span title="'+t+'">'+t.substring(0,e-3)+"K</span>":'<span title="'+t+'">'+t.substring(0,e-6)+"M</span>"}var c=this,g=c.width(),v=c.height(),b=g/2,y=v/2,S=Math.cos,T=Math.sin,C=Math.PI,x=t.extend({segmentShowStroke:!0,segmentStrokeColor:"#0C1013",segmentStrokeWidth:1,baseColor:"rgba(0,0,0,0.5)",baseOffset:4,edgeOffset:10,percentageInnerCutout:75,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,showTip:!0,showLabel:!1,ratioFont:1.5,shortInt:!1,tipClass:"doughnutTip",summaryClass:"doughnutSummary",summaryTitle:"",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(t,e){},onPathLeave:function(t,e){}},n),O={linear:function(t){return t},easeInOutExpo:function(t){var e=.5>t?8*t*t*t*t:1-8*--t*t*t*t;return e>1?1:e}},k=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();x.beforeDraw.call(c);var A=t('<svg width="'+g+'" height="'+v+'" viewBox="0 0 '+g+" "+v+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(c),E=[],M=O[x.animationEasing],F=h([v/2,g/2])-x.edgeOffset,I=F*(x.percentageInnerCutout/100),L=0,N=F+x.baseOffset,P=I-x.baseOffset;t(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:a(N,P),fill:x.baseColor}).appendTo(A);var R=t(document.createElementNS("http://www.w3.org/2000/svg","g"));if(R.attr({opacity:0}).appendTo(A),x.showTip){var q=t('<div class="'+x.tipClass+'" />').appendTo("body").hide();q.width(),q.height()}for(var D=2*(I-(F-I)),j=t('<div class="'+x.summaryClass+'" />').appendTo(c).css({width:D+"px",height:D+"px","margin-left":-(D/2)+"px","margin-top":-(D/2)+"px"}),X=t("<p></p>").appendTo(j).css({opacity:0}),Y=0,Z=e.length;Z>Y;Y++)L+=e[Y].value,E[Y]=t(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":x.segmentStrokeWidth,stroke:x.segmentStrokeColor,fill:e[Y].color,"data-order":Y}).appendTo(R).on("mouseenter",o).on("mouseleave",i).on("mousemove",r).on("click",s);return l(u),c}}(jQuery);
